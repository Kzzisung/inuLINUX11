#!/bin/bash

# ==========================================
# 색상 변수 정의
# ==========================================
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# ==========================================
# 1. CPU Top 5 (Process Monitor)
# ==========================================
function view_cpu_usage() {
    echo -e "${YELLOW}========================================${NC}"
    echo -e "${YELLOW}      [1] CPU Top 5 프로세스 모니터링      ${NC}"
    echo -e "${YELLOW}========================================${NC}"

    ./process_monitor.sh
}

# ==========================================
# 2. 네트워크 상태 (Netstat)
# ==========================================
function view_network_status() {
    echo -e "${BLUE}========================================${NC}"
    echo -e "${BLUE}        [2] 네트워크 연결 상태 정보       ${NC}"
    echo -e "${BLUE}========================================${NC}"

    ./network_check.sh
}

# ==========================================
# 3. 소스코드 컴파일러 (Compiler)
# ==========================================
function run_compiler() {
    echo -e "${RED}========================================${NC}"
    echo -e "${RED}     [3] 소스코드 자동 감지 및 컴파일러    ${NC}"
    echo -e "${RED}========================================${NC}"

    ./auto_compiler.sh
}

# ==========================================
# 4. 프로젝트 백업기능
# ==========================================
function view_system_info() {
    echo -e "${GREEN}========================================${NC}"
    echo -e "${GREEN}          [4] 프로젝트 백업 기능           ${NC}"
    echo -e "${GREEN}========================================${NC}"
    
    ./auto_backup.sh
}

# ==========================================
# 메인 메뉴 루프 (여기는 수정할 필요 없음)
# ==========================================
while true; do
    clear
    echo -e "########################################"
    echo -e "#       ${YELLOW}LINUX TEAM PROJECT SYSTEM${NC}      #"
    echo -e "########################################"
    echo -e "#                                      #"
    echo -e "#  1. CPU Top 5 프로세스 확인          #"
    echo -e "#  2. 네트워크 연결 상태 (Netstat)     #"
    echo -e "#  3. 소스코드 컴파일러 실행           #"
    echo -e "#  4. 프로젝트 백업 기능               #"
    echo -e "#  0. 종료                             #"
    echo -e "#                                      #"
    echo -e "########################################"
    echo -n ">> 메뉴를 선택하세요: "
    read choice

    case $choice in
        1)
            clear
            view_cpu_usage
            ;;
        2)
            clear
            view_network_status
            ;;
        3)
            clear
            run_compiler
            ;;
        4)
            clear
            view_system_info
            ;;
        0)
            echo "프로그램을 종료합니다."
            exit 0
            ;;
        *)
            echo "잘못된 입력입니다."
            ;;
    esac

    echo ""
    echo -n ">> 메뉴로 돌아가려면 Enter를 누르세요..."
    read temp
done
